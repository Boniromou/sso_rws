<script>
  function disable_duration()
  {
    if(document.getElementById('never_end').checked)
    {
      document.getElementById('duration_day').disabled = true;
      document.getElementById('duration_hour').disabled = true;
    }
    else
    {
      document.getElementById('duration_day').disabled = false;
      document.getElementById('duration_hour').disabled = false;
    }  
  }
</script>

<%= form_tag({action: :create}, :method => :post, :class => "smart-form", :remote => true) do %>
  <fieldset>
    <section>
      <label class="label"><%=t("maintenance.property") %></label>
      <label class="select select-multiple">
      <%= select_tag "properties", options_for_select(Property.all.map{|x| x.id}, @params.blank? ? nil:@params[:properties]), :multiple => true, :class => "select2", :style => "width:100%" %>
      </label>
    </section>
  </fieldset>

  <fieldset>
    <section>
      <label class="label"><%=t("maintenance.allow_test")%></label>
      <div class="inline-group">
      <label class="radio">
        <%= radio_button_tag "allow_test_account", 1, allow_test_account_on %>
        <i></i><%= t("general.on_state") %>
      </label>
      <label class="radio">
        <%= radio_button_tag "allow_test_account", 0, allow_test_account_off %>
        <i></i><%= t("general.off_state") %>
      </label>
      </div>
    </section>
  </fieldset>

  <%= render :partial => "maintenance_time_form" %>

  <footer>
    <%= submit_tag t("general.confirm"), :class => "btn btn-primary" %>
  </footer>
<% end %>

<%= render :partial => "error" %>
<%= render partial: "shared/nav_setup", locals: { tab_to_activate: "create_maintenance" } %>

<script>
  $(document).ready(function() {
    $("#properties").select2({
      //placeholder: "Select a property",
      allowClear: true
    });
  });
</script>
